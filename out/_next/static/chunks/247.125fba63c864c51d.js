"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[32,247],{1032:(e,t,r)=>{r.d(t,{K9:()=>o,TP:()=>l,zv:()=>c});var a=r(3576),s=r(2127),i=r(2209),n=r(1106);async function o(e,t,r){let o=s._.NEXT_PUBLIC_SPARK_BYTEBIN_URL,l=null;r&&t&&t.query["x-bytebin-url"]&&(o=t.query["x-bytebin-url"]),r&&t&&t.query["x-bytebin-api-key"]&&(l=t.query["x-bytebin-api-key"]);let c=await fetch("".concat(o,"/").concat(e),{headers:(0,a._)({Accept:"".concat((0,i.vf)().join(","))},l?{"Bytebin-Api-Key":l}:{})});if(!c.ok)throw Error("bytebin request failed");let d=(0,i.xk)(c.headers.get("content-type")),h=await c.arrayBuffer(),f=(0,n.O)(e,h,d);return{type:d,buf:h,exportCallback:f}}async function l(e){var t;if(!e)throw Error("selectedFile is undefined");let r=(0,i.p7)(e.name.split(".").pop());return{type:(0,i.gt)(r),buf:await (t=e,new Promise((e,r)=>{let a=new FileReader;a.onload=()=>{e(a.result)},a.onerror=r,a.readAsArrayBuffer(t)}))}}async function c(e,t){let r,a,o="".concat(s._.NEXT_PUBLIC_SPARK_MONITOR_URL).concat(e),l=await fetch(o);if(!l.ok)throw Error("Failed to fetch remote file: ".concat(l.status));let c=e.split("."),d=c[c.length-1];if("sparkprofile"===d)r="application/x-spark-sampler";else if("sparkheap"===d)r="application/x-spark-heap";else if("sparkhealth"===d)r="application/x-spark-health";else{let e=l.headers.get("content-type");if(e&&"application/octet-stream"!==e)try{r=(0,i.xk)(e)}catch(e){r="application/x-spark-sampler"}else r="application/x-spark-sampler"}let h=l.headers.get("content-length"),f=h?parseInt(h,10):void 0;if(l.body&&"function"==typeof l.body.getReader){let e=l.body.getReader(),r=[],s=0;for(;;){let{done:a,value:i}=await e.read();if(a)break;i&&(r.push(i),s+=i.length,t&&t(s,f))}let i=new Uint8Array(s),n=0;for(let e of r)i.set(e,n),n+=e.length;a=i.buffer}else{let e=await l.arrayBuffer();t&&t(e.byteLength,f),a=e}let u=e.split("/").pop()||"remote-report",p=(0,n.O)(u.replace(/\.[^/.]+$/,""),a,r);return{type:r,buf:a,exportCallback:p}}},4198:(e,t,r)=>{r.d(t,{Co:()=>a,Cw:()=>o,VV:()=>i,es:()=>n,vL:()=>s});let a="loading-data",s="failed-data",i="loaded-profile-data",n="loaded-heap-data",o="loaded-health-data"},4343:(e,t,r)=>{r.d(t,{q:()=>u});var a=r(5436);class s{constructor(e){let t=a.Hg.fromBinary(new Uint8Array(e));this.metadata=t.metadata,this.timeWindowStatistics=t.timeWindowStatistics}}class i{constructor(e){let t=a.Xw.fromBinary(new Uint8Array(e));this.metadata=t.metadata,this.entries=t.entries}}class n{getParent(e){return this.view[e]}getParents(e){let t=[],r=e;for(;void 0!==r;){let e=this.getParent(r);if(void 0===e)break;t.push(e),r=e}return t}traverseParents(e){let t=new Set;for(let r of e)for(let e of(t.add(r),this.getParents(r)))t.add(e);return t}constructor(e){this.view=Array(e.allNodes.length);let t=e=>{for(let r of e.children)this.view[r.id]=e.id,t(r)};for(let r of e.threadNodes)t(r)}}class o{getNode(e){return this.allNodes[e]}getParent(e){let t=this.parentIds[e];if(-1!==t)return this.allNodes[t]}constructor(e){let t=new l,r=function e(t,r){for(let e of t)e.id=r.add(e);let a=r.prev();for(let a of t)a.children&&e(a.children,r);return a}(e,t),a=t.build();for(let e of(this.allNodes=a,this.threadNodes=a.slice(0,r+1),this.stackTraceNodes=a.slice(r+1,a.length),this.parentIds=new Int32Array(a.length).fill(-1),a))if(e.children)for(let t of e.children)this.parentIds[t.id]=e.id}}class l{prev(){return this.next()-1}next(){return this.arr.length}add(e){return this.arr.push(e),this.arr.length-1}build(){return this.arr}constructor(){this.arr=[]}}class c{static unflatten(e){let t=(e,r)=>{for(let a of e){let e=[];for(let t of a.childrenRefs)e.push(r[t]);a.children=e,t(a.children,r)}};for(let r of e)r.childrenRefs.length&&t([r],r.children)}static calculateTotalTimes(e){for(let t of e){if(!t.times.length)return;t.time=t.times.reduce((e,t)=>e+t,0)}}}class d{static createFromExisting(e){return new d(e.sources,e.idToSource)}static create(e,t){let{classSources:r,methodSources:a,lineSources:s}=t;if(!(r||a||s))return new d([],new Map);let i=Array.from(new Set([...Object.values(r||{}),...Object.values(a||{}),...Object.values(s||{})])),n=new Map;for(let t of e)if(t.className&&!d.excludes(t)){let e;a&&t.methodName&&t.methodDesc&&(e=a["".concat(t.className,";").concat(t.methodName,";").concat(t.methodDesc)]),!e&&s&&t.lineNumber&&(e=s["".concat(t.className,";").concat(t.lineNumber)]),!e&&r&&(e=r[t.className]),e&&!["minecraft","java"].includes(e)&&n.set(t.id,e)}return new d(i,n)}getSource(e){return this.idToSource.get(e)}getSources(){return this.sources}hasSources(){return this.idToSource.size>0}constructor(e,t){this.sources=e,this.idToSource=t}}d.excludes=e=>e.className.startsWith("com.destroystokyo.paper.event.executor.asm.generated.");class h{constructor(e){let t=a.jk.fromBinary(new Uint8Array(e));c.unflatten(t.threads),this.nodes=new o(t.threads),this.bottomUp=new n(this.nodes),this.sources=d.create(this.nodes.stackTraceNodes,t),c.calculateTotalTimes(this.nodes.allNodes),this.metadata=t.metadata,this.threads=t.threads,this.timeWindows=t.timeWindows,this.timeWindowStatistics=t.timeWindowStatistics,this.channelInfo=t.channelInfo}}var f=r(4198);function u(e,t){if("application/x-spark-sampler"===e)return[new h(t),f.VV];if("application/x-spark-heap"===e)return[new i(t),f.es];if("application/x-spark-health"===e)return[new s(t),f.Cw];throw Error("Unknown content type: "+e)}}}]);