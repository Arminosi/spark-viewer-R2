(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[913],{140:(e,t,s)=>{"use strict";s.d(t,{A:()=>ee});var a=s(7876),l=s(5039),n=s.n(l),r=s(1043),i=s.n(r),o=s(4232),d=s(5436),c=s(6390),u=s(8341),h=s(1041),m=s(7460);function x(e){let{data:t}=e;return(0,a.jsx)("ul",{children:Object.entries(t).map((e,t)=>{let[s,l]=e;return"object"==typeof l?(0,a.jsx)(j,{name:s,value:l},t):(0,a.jsx)(p,{name:s,value:l},t)})})}let j=e=>{let{name:t,value:s}=e,[l,n]=(0,o.useState)(!1);return(0,a.jsxs)("li",{children:[(0,a.jsxs)("span",{style:{cursor:"pointer"},onClick:function(){n(!l)},children:[t," ",(0,a.jsx)(m.g,{icon:l?h.xbI:h.CHJ})]}),l&&(0,a.jsx)(x,{data:s})]})},p=e=>{let{name:t,value:s}=e;return(0,a.jsxs)("li",{children:[t,":"," ",(0,a.jsx)("span",{className:"type-"+typeof s,children:String(s)})]})};function v(e){let{data:t}=e;return(0,a.jsxs)("div",{className:"configurations",children:[(0,a.jsx)("p",{children:"Some extra metadata was provided by the platform:"}),(0,a.jsx)(x,{data:t})]})}function f(e){let{gameRules:t}=e,s=t.filter(e=>!w(e)),[l,n]=(0,o.useState)(!1);return(0,a.jsxs)("div",{className:"gamerules",children:[0===s.length&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("p",{children:"All game rules are set to default values."})}),s.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h2",{children:"Game Rule Overrides"}),(0,a.jsx)("span",{children:"(Values are only shown below when they differ from the default)"}),(0,a.jsx)("ul",{children:s.map(e=>(0,a.jsxs)("li",{children:[e.name," (default:"," ",(0,a.jsx)(g,{value:e.defaultValue}),")",(0,a.jsx)("ul",{children:Object.entries(e.worldValues).filter(t=>{let[s,a]=t;return a!==e.defaultValue}).map(e=>{let[t,s]=e;return(0,a.jsxs)("li",{children:[t,":"," ",(0,a.jsx)(g,{value:s})]},t)})})]},e.name))})]}),(0,a.jsxs)("button",{onClick:()=>n(e=>!e),children:[l?"Hide":"Show"," default values"]}),l&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h2",{children:"Game Rule Defaults"}),(0,a.jsx)("span",{children:"(The default values for each game rule)"}),(0,a.jsx)("ul",{children:t.map(e=>(0,a.jsxs)("li",{children:[e.name,":"," ",(0,a.jsx)(g,{value:e.defaultValue})]},e.name))})]})]})}let g=e=>{let{value:t}=e;return"true"===t||"false"===t?(0,a.jsx)("span",{className:"value-".concat(t),children:t}):/^-?\d+$/.test(t)?(0,a.jsx)("span",{className:"value-number",children:t}):(0,a.jsx)("span",{className:"value-string",children:t})},w=e=>{let t=Array.from(new Set(Object.values(e.worldValues)));return 1===t.length&&t[0]===e.defaultValue};function b(e){let{systemStatistics:t}=e;return(0,a.jsxs)("p",{children:["The JVM was started with the following arguments:",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)("span",{style:{maxWidth:"1000px",display:"inline-block",color:"inherit"},children:t.java.vmArgs})]})}var y=s(3576),k=s(2779),S=s(921);function C(e){let{memory:t,gc:s}=e,{t:l}=(0,u.o)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h2",{children:"Memory Areas"}),(0,a.jsxs)("div",{className:"memory",children:[t.heap&&(0,a.jsx)(N,{name:"Heap",usage:t.heap}),t.nonHeap&&(0,a.jsx)(N,{name:"Non Heap",usage:t.nonHeap}),(t.pools||[]).filter(e=>e.usage).map(e=>(0,a.jsx)(N,{name:"Heap - "+e.name,usage:e.usage,collectionUsage:e.collectionUsage},e.name))]})]})}let N=e=>{let{name:t,usage:s,collectionUsage:l}=e;return(0,a.jsxs)("div",{className:"memory-pool",children:[(0,a.jsx)("div",{className:"header",children:t}),(0,a.jsx)(F,(0,y._)({},s)),l&&(0,a.jsxs)("div",{children:[(0,a.jsx)("br",{}),(0,a.jsxs)("div",{className:"header",children:[t," (at last GC)"]}),(0,a.jsx)(F,(0,y._)({},l))]})]})},F=e=>{let t,s,{used:l,committed:n,max:r}=e,{t:i}=(0,u.o)();return s=(t=r&&r>0?l/r:l/n)>.9?S.m.colors.red:t>.65?S.m.colors.yellow:S.m.colors.green,(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"usage-bar",children:(0,a.jsx)("div",{style:{width:"".concat(Math.ceil(100*t),"%"),backgroundColor:s}})}),(0,a.jsxs)("ul",{children:[(0,a.jsxs)("li",{children:["Used: ",(0,a.jsx)("span",{children:(0,k.Yq)(l,i)})]}),(0,a.jsxs)("li",{children:["Committed: ",(0,a.jsx)("span",{children:(0,k.Yq)(n,i)})]}),-1!==r&&r!==n&&(0,a.jsxs)("li",{children:["Max: ",(0,a.jsx)("span",{children:(0,k.Yq)(r,i)})]})]})]})};var T=s(8369),A=s.n(T),I=s(9776),E=s(4159);function M(e){let{systemStatistics:t}=e,{t:s}=(0,u.o)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h2",{children:"Network Interfaces"}),(0,a.jsx)("p",{children:"Note: the usage tracked below is captured at a system level (includes data from other processes running on the same machine)."}),(0,a.jsx)("div",{children:Object.entries(t.net).map(e=>{let[t,s]=e;return(0,a.jsx)(_,{name:t,data:s},t)})})]})}let _=e=>{let{name:t,data:s}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{children:t}),(0,a.jsxs)("div",{className:n()(A().widgets,"widgets","net-interface-widgets"),children:[(0,a.jsx)(O,{direction:"Transmit",format:"bytes/sec",values:s.txBytesPerSecond}),(0,a.jsx)(O,{direction:"Receive",format:"bytes/sec",values:s.rxBytesPerSecond})]}),(0,a.jsxs)("div",{className:n()(A().widgets,"widgets","net-interface-widgets"),children:[(0,a.jsx)(O,{direction:"Transmit",format:"packets/sec",values:s.txPacketsPerSecond}),(0,a.jsx)(O,{direction:"Receive",format:"packets/sec",values:s.rxPacketsPerSecond})]})]})},O=e=>{let{direction:t,format:s,values:l}=e,{t:n}=(0,u.o)();return(0,a.jsxs)(I.A,{title:t,label:s,formatter:{color:e=>e<=0?S.m.colors.yellow:S.m.colors.green,format:e=>"bytes/sec"===s?(0,k.Yq)(e,n):(0,k.ZV)(e)},children:[(0,a.jsx)(E.A,{value:l.min,label:"min"}),(0,a.jsx)(E.A,{value:l.median,label:"med"}),(0,a.jsx)(E.A,{value:l.percentile95,label:"95%ile"}),(0,a.jsx)(E.A,{value:l.max,label:"max"})]})};function P(e){let{platform:t,platformStatistics:s,systemStatistics:l,platformType:n,onlineMode:r,runningTime:i,numberOfTicks:o,numberOfIncludedTicks:c,engine:h}=e,{t:m}=(0,u.o)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{children:[m("platformStats.".concat("application"===n?"systemIs":"platformIs"))," ",(0,a.jsx)("span",{children:t.brand||t.name})," ",n," ",m("platformStats.running")," ","application"===n?m("platformStats.sparkVersion"):""," ",m("platformStats.version"),'"',(0,a.jsx)("span",{children:t.version}),'".']}),t.minecraftVersion&&(0,a.jsxs)("p",{children:[m("platformStats.minecraftVersion"),' "',(0,a.jsx)("span",{children:t.minecraftVersion}),'".']}),r&&(0,a.jsxs)("p",{children:[n," ",m("platformStats.isRunningIn")," ",(0,a.jsx)("span",{children:r}),"."]}),(null==s?void 0:s.playerCount)>0&&(0,a.jsxs)("p",{children:[n," ",m("platformStats.playerCount")," ",(0,a.jsx)("span",{children:s.playerCount})," ",m("platformStats.playersOnline"),"."]}),!!l&&(0,a.jsx)(R,{systemStatistics:l}),i&&(0,a.jsxs)("p",{children:[m("platformStats.profilerWasRunning")," ",h?(0,a.jsxs)(a.Fragment,{children:["(",m("platformStats.engine")," ",(0,a.jsx)("span",{children:h==d.Hq.ASYNC?"async":"java"}),")"," "]}):"",m("platformStats.wasRunningFor")," ",(0,a.jsx)("span",{children:(0,k.pZ)(i,m)}),!!o&&(0,a.jsxs)(a.Fragment,{children:[" ","(",(0,a.jsx)("span",{children:o})," ",m("platformStats.ticks"),")"]}),".",!!c&&(0,a.jsxs)(a.Fragment,{children:[" ",(0,a.jsx)("span",{children:c})," ",m("platformStats.ticksExceeded"),"."]})]})]})}let R=e=>{var t,s;let{systemStatistics:l}=e,{t:n}=(0,u.o)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{children:[n("platformStats.systemIsRunning")," ",(0,a.jsx)("span",{children:l.os.name})," (",(0,a.jsx)("span",{children:l.os.arch}),") ",n("platformStats.version2"),' "',(0,a.jsx)("span",{children:l.os.version}),'" ',n("platformStats.andHas")," ",(0,a.jsx)("span",{children:l.cpu.threads})," ",n("platformStats.cpuThreadsAvailable"),"."]}),l.cpu.modelName&&(0,a.jsxs)("p",{children:[n("platformStats.cpuDescribed")," ",(0,a.jsx)("span",{children:l.cpu.modelName}),"."]}),(0,a.jsxs)("p",{children:[n("platformStats.processUsing")," ",(0,a.jsx)("span",{children:l.java.version})," (",(0,a.jsx)("span",{children:l.java.vendorVersion})," ",n("platformStats.from")," ",(0,a.jsx)("span",{children:l.java.vendor}),").",(null==(t=l.jvm)?void 0:t.name)&&(0,a.jsxs)(a.Fragment,{children:[" ",n("platformStats.jvmIs")," ",(0,a.jsx)("span",{children:null==(s=l.jvm)?void 0:s.name}),"."]})]}),(0,a.jsxs)("p",{children:[n("platformStats.currentProcessUptime")," ",(0,a.jsx)("span",{children:(0,k.pZ)(l.uptime,n)}),"."]})]})};function V(e){let{plugins:t,dataPacks:s}=e,[l,n]=(0,o.useState)(!1),r=t.some(e=>e.builtIn),i=l?t:t.filter(e=>!e.builtIn),[d,c]=(0,o.useState)(!1),u=s.some(e=>e.builtIn),h=d?s:s.filter(e=>!e.builtIn);return(0,a.jsxs)("div",{className:"plugins-mods-list",children:[!!t.length&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h2",{children:"Plugins/Mods"}),r&&(0,a.jsxs)("button",{onClick:()=>n(e=>!e),children:[l?"Hide":"Show"," built-in plugins"]}),(0,a.jsx)("ul",{children:i.map(e=>(0,a.jsx)("li",{children:(0,a.jsx)(D,(0,y._)({},e))},e.name))})]}),!!s.length&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h2",{children:"Data Packs"}),u&&(0,a.jsxs)("button",{onClick:()=>c(e=>!e),children:[d?"Hide":"Show"," built-in Data Packs"]}),(0,a.jsx)("ul",{children:h.map(e=>(0,a.jsx)("li",{children:(0,a.jsx)(H,(0,y._)({},e))},e.name))})]})]})}let H=e=>{let{name:t,description:s,source:l}=e,n=(0,a.jsx)("span",{className:"title",children:t}),r=l?(0,a.jsxs)(a.Fragment,{children:[" ",(0,a.jsx)("span",{className:"darker",children:"("}),l,(0,a.jsx)("span",{className:"darker",children:")"})]}):null,i=s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("br",{}),s]}):null;return(0,a.jsxs)(a.Fragment,{children:[n,r,i]})},D=e=>{let{name:t,version:s,author:l,description:n}=e,r=(0,a.jsx)("span",{className:"title",children:t}),i=l?(0,a.jsxs)(a.Fragment,{children:[" ",(0,a.jsx)("span",{className:"darker",children:"by"})," ",l]}):null,o=s?(0,a.jsxs)(a.Fragment,{children:[" ",s.startsWith("v")?s:"v".concat(s)]}):null,d=n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("br",{}),n]}):null;return(0,a.jsxs)(a.Fragment,{children:[r,o,i,d]})};function L(e){let{parsedConfigurations:t}=e;return(0,a.jsxs)("div",{className:"configurations",children:[(0,a.jsx)("p",{children:"The server is using the following configuration settings:"}),(0,a.jsx)(x,{data:t})]})}var q=s(2701),U=s(9893);function J(e){let{chunks:t}=e,s=t.slice(0,10),l=t.length-10;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("ul",{children:[s.map(e=>(0,a.jsxs)("li",{children:[(0,a.jsxs)("span",{"data-tooltip-id":"chunk-tp-tooltip","data-tooltip-content":"/tp ".concat(16*e.x," ~ ").concat(16*e.z),children:[e.x,", ",e.z]})," ","(",e.totalEntities," ",1===e.totalEntities?"entity":"entities",")"]},"".concat(e.x,",").concat(e.z))),l>0&&(0,a.jsxs)("li",{style:{listStyleType:"none"},children:["... and ",l," more"]})]}),(0,a.jsx)(U.m_,{id:"chunk-tp-tooltip",place:"left",clickable:!0})]})}let W=o.lazy(()=>Promise.all([s.e(9),s.e(745)]).then(s.bind(s,6745)));function z(e){let{entityCounts:t}=e,s=Object.entries(t).sort((e,t)=>t[1]-e[1]).slice(0,15);return(0,a.jsx)("ul",{children:s.map(e=>{let[t,s]=e;return t.startsWith("minecraft:")&&(t=t.substring(10)),(0,a.jsxs)("li",{children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,a.jsx)(o.Suspense,{fallback:(0,a.jsx)("span",{style:{width:16,height:16,display:"inline-block"}}),children:(0,a.jsx)(W,{name:t})}),(0,a.jsx)("span",{children:t})]}),(0,a.jsx)("span",{style:{color:"#fff"},children:s})]},t)})})}function B(e){let{worlds:t}=e,{t:s}=(0,u.o)(),l=(0,o.useMemo)(()=>{let e=[];for(let s of t)for(let t of s.regions){let a=(0,q._)((0,y._)({},t),{world:s.name});a.chunks.sort((e,t)=>t.totalEntities-e.totalEntities),e.push(a)}return e.sort((e,t)=>t.totalEntities-e.totalEntities),e},[t]),[n,r]=(0,o.useState)(0),i=(0,o.useMemo)(()=>l[n],[l,n]),d=(0,o.useMemo)(()=>{let e={};for(let t of i.chunks)for(let[s,a]of Object.entries(t.entityCounts))e[s]||(e[s]=0),e[s]+=a;return e},[i]);return(0,a.jsxs)("div",{className:"region-view",children:[(0,a.jsxs)("div",{className:"header region-selector",children:[(0,a.jsx)("div",{className:"button",onClick:function(){r(e=>(e-1+l.length)%l.length)},title:s("viewer.world.previous"),children:(0,a.jsx)(m.g,{icon:h.dDM})}),(0,a.jsxs)("span",{children:[s("viewer.world.region")," #",n+1," (",s("viewer.world.of")," ",l.length,")"]}),(0,a.jsx)("div",{className:"button",onClick:function(){r(e=>(e+1)%l.length)},title:s("viewer.world.next"),children:(0,a.jsx)(m.g,{icon:h.dxS})})]}),(0,a.jsxs)("div",{className:"detail-lists",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("b",{children:s("viewer.world.entities")})," (",(0,a.jsx)("span",{children:i.totalEntities}),"):"]}),(0,a.jsx)(z,{entityCounts:d})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("b",{children:"World"}),": ",i.world]}),(0,a.jsx)("br",{}),(0,a.jsxs)("p",{children:[(0,a.jsx)("b",{children:s("viewer.world.chunks")})," (",(0,a.jsx)("span",{children:i.chunks.length}),"):"]}),(0,a.jsx)(J,{chunks:i.chunks})]})]})]})}function G(e){let{worldsInput:t}=e,{t:s}=(0,u.o)();for(let e of t)e.totalChunks=e.regions.reduce((e,t)=>e+t.chunks.length,0);let l=t.reduce((e,t)=>e+t.totalChunks,0);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("b",{children:s("viewer.world.chunks")})," (",s("viewer.world.total"),"): ",(0,a.jsx)("span",{children:l})]}),(0,a.jsx)("ul",{children:t.sort((e,t)=>t.totalChunks-e.totalChunks).map(e=>(0,a.jsxs)("li",{children:[e.name,": ",(0,a.jsx)("span",{children:e.totalChunks})]},e.name))})]})}function K(e){let{totalEntities:t,worlds:s}=e,{t:l}=(0,u.o)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("b",{children:l("viewer.world.entities")})," (",l("viewer.world.total"),"): ",(0,a.jsx)("span",{children:t})]}),(0,a.jsx)("ul",{children:s.sort((e,t)=>t.totalEntities-e.totalEntities).map(e=>(0,a.jsxs)("li",{children:[e.name,": ",(0,a.jsx)("span",{children:e.totalEntities})]},e.name))})]})}function Y(e){let{worldStatistics:t}=e,{t:s}=(0,u.o)();return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"header",children:s("viewer.world.summary")}),(0,a.jsxs)("div",{className:"detail-lists",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(K,{totalEntities:t.totalEntities,worlds:t.worlds}),(0,a.jsx)(G,{worldsInput:t.worlds})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("b",{children:s("viewer.world.entityCounts")}),":"]}),(0,a.jsx)(z,{entityCounts:t.entityCounts})]})]})]})}function Z(e){let{worldStatistics:t}=e;return(0,a.jsxs)("div",{className:"entity-counts",children:[(0,a.jsx)(Y,{worldStatistics:t}),(0,a.jsx)(B,{worlds:t.worlds})]})}var Q=s(1332);function X(e){var t,s,l;let{metadata:n}=e,{t:r}=(0,u.o)(),{platform:i,platformStatistics:h,systemStatistics:m,serverConfigurations:x,extraPlatformMetadata:j}=n,p=d.KI[i.type].toLowerCase(),{parsedConfigurations:g,onlineMode:w}=(0,o.useMemo)(()=>{let e,t;x&&Object.keys(x).length&&(e=(0,c.K0)(x,e=>JSON.parse(e)));try{t=(0,c.Q)(null==h?void 0:h.onlineMode,e)}catch(e){}return{parsedConfigurations:e,onlineMode:t}},[x,h]),y=(0,o.useMemo)(()=>{if(j&&Object.keys(j).length)return(0,c.K0)(j,e=>JSON.parse(e))},[j]),{runningTime:k,numberOfTicks:S,numberOfIncludedTicks:N,samplerEngine:F}=(0,c.XI)(n),[T,A]=(0,o.useState)(r((null==h?void 0:h.world)&&(null==h||null==(t=h.world)?void 0:t.totalEntities)?"viewer.metadataTabs.world":"viewer.metadataTabs.platform")),I={[r("viewer.metadataTabs.platform")]:()=>!0,[r("viewer.metadataTabs.memory")]:()=>{var e,t,s;return!!(null==h||null==(e=h.memory)?void 0:e.heap)||!!(null==h||null==(s=h.memory)||null==(t=s.pools)?void 0:t.length)},[r("viewer.metadataTabs.jvmFlags")]:()=>{var e;return!!(null==m||null==(e=m.java)?void 0:e.vmArgs)},[r("viewer.metadataTabs.configurations")]:()=>!!g,[r("viewer.metadataTabs.world")]:()=>{var e;return!!(null==h?void 0:h.world)&&!!(null==h||null==(e=h.world)?void 0:e.totalEntities)},[r("viewer.metadataTabs.misc")]:()=>!!y,[r("viewer.metadataTabs.pluginsMods")]:()=>{var e;return!!(null==h||null==(e=h.world)?void 0:e.dataPacks.length)||!!Object.keys(n.sources).length},[r("viewer.metadataTabs.network")]:()=>{var e;return!!Object.keys(null!=(e=null==m?void 0:m.net)?e:{}).length},[r("viewer.metadataTabs.gameRules")]:()=>{var e;return!!(null==h||null==(e=h.world)?void 0:e.gameRules.length)}};return(0,a.jsx)(Q.A,{title:r("viewer.metadata.title")||"Server Metadata",defaultExpanded:!1,children:(0,a.jsxs)("div",{className:"textbox metadata-detail",children:[(0,a.jsx)("div",{className:"metadata-detail-controls",children:Object.entries(I).map(e=>{let[t,s]=e;return!!s()&&(0,a.jsx)("div",{onClick:()=>A(t),className:T===t?"toggled":void 0,children:t},t)})}),(0,a.jsx)("div",{className:"metadata-detail-content",children:T===r("viewer.metadataTabs.platform")?(0,a.jsx)(P,{platform:i,platformStatistics:h,systemStatistics:m,platformType:p,onlineMode:w,runningTime:k,numberOfTicks:S,numberOfIncludedTicks:N,engine:F}):T===r("viewer.metadataTabs.memory")?(0,a.jsx)(C,{memory:null==h?void 0:h.memory,gc:null==h?void 0:h.gc}):T===r("viewer.metadataTabs.network")?(0,a.jsx)(M,{systemStatistics:m}):T===r("viewer.metadataTabs.jvmFlags")?(0,a.jsx)(b,{systemStatistics:m}):T===r("viewer.metadataTabs.configurations")?(0,a.jsx)(L,{parsedConfigurations:g}):T===r("viewer.metadataTabs.world")?(0,a.jsx)(Z,{worldStatistics:h.world}):T===r("viewer.metadataTabs.gameRules")?(0,a.jsx)(f,{gameRules:null==h||null==(s=h.world)?void 0:s.gameRules}):T===r("viewer.metadataTabs.pluginsMods")?(0,a.jsx)(V,{plugins:Object.values(n.sources||{}),dataPacks:(null==h||null==(l=h.world)?void 0:l.dataPacks)||[]}):T===r("viewer.metadataTabs.misc")?(0,a.jsx)(v,{data:y}):(0,a.jsx)("p",{children:"Unknown view."})})]})})}var $=s(8815);function ee(e){let{metadata:t,metadataToggle:s}=e;return(0,a.jsx)("div",{className:n()(i().metadata,{expanded:s.showMetadata}),style:{display:s.showMetadata?void 0:"none"},children:(0,a.jsxs)("div",{className:i()["metadata-grid"],children:[(0,a.jsx)("div",{className:i()["widgets-column"],children:!!t.platformStatistics&&(0,a.jsx)($.A,{metadata:t,expanded:s.showMetadata})}),(0,a.jsx)("div",{className:i()["metadata-column"],children:!!t.platform&&s.showMetadata&&(0,a.jsx)(X,{metadata:t})})]})})}},1043:e=>{e.exports={metadata:"metadata_metadata__Bdn_l"}},1630:e=>{e.exports={controls:"controls_controls__cDf_0"}},2318:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(7876),l=s(7460),n=s(5039),r=s.n(n);function i(e){let{icon:t,onClick:s,title:n,extraClassName:i,children:o}=e,d=r()("button","textbox",i);return(0,a.jsxs)("div",{className:d,onClick:s,title:n,children:[(0,a.jsx)(l.g,{icon:t}),o]})}},2913:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>I});var a=s(7876),l=s(8847),n=s.n(l),r=s(9099),i=s(4232),o=s(9915),d=s(8341),c=s(7897),u=s(1106),h=s(1032),m=s(3480),x=s(4343),j=s(4198),p=s(140),v=s(4344),f=s(1630),g=s.n(f),w=s(5573),b=s(7328),y=s.n(b),k=s(3213),S=s(2779);function C(e){let{metadata:t}=e,{user:s,generatedTime:l}=t,[n,r]=(0,S.F5)(l);return(0,a.jsxs)("div",{className:"textbox title",children:[(0,a.jsx)(y(),{children:(0,a.jsxs)("title",{children:["Health Report @ ",n," ",r," | spark"]})}),(0,a.jsxs)("span",{children:["Health Report created by"," ",(0,a.jsx)(k.A,{user:s,platform:t.platform}),null==s?void 0:s.name," @ ",n," ",r]})]})}function N(e){let{metadata:t,exportCallback:s}=e;return(0,a.jsxs)("div",{className:g().controls,children:[(0,a.jsx)(C,{metadata:t}),(0,a.jsx)(w.A,{exportCallback:s})]})}function F(e){let{metadata:t,exportCallback:s}=e,l=(0,v.C)();return(0,a.jsxs)("div",{children:[(0,a.jsx)(N,{metadata:t,exportCallback:s}),(0,a.jsx)(p.A,{metadata:t,metadataToggle:l})]})}s(7141);let T=n()(()=>Promise.all([s.e(950),s.e(479),s.e(212)]).then(s.bind(s,7212)),{loadableGenerated:{webpack:()=>[7212]}}),A=n()(()=>Promise.all([s.e(569),s.e(452),s.e(666)]).then(s.bind(s,9666)),{loadableGenerated:{webpack:()=>[9666]}});function I(e){let{initialResult:t}=e,l=(0,r.useRouter)(),n=(0,i.useMemo)(()=>l.query.code,[l]),{selectedFile:p}=(0,i.useContext)(c.SelectedFileContext),[v,f]=(0,i.useState)(j.Co),[g,w]=(0,i.useState)(),[b,y]=(0,i.useState)(),[k,S]=(0,i.useState)(),{t:C}=(0,d.o)(),N=(0,i.useCallback)(async e=>{let{type:t,buf:s,exportCallback:a}=await (0,h.K9)(e,null,!1);S(()=>a);let[l]=(0,x.q)(t,s);w(l),y(l.metadata)},[S,w]);switch((0,i.useEffect)(()=>{if(t){try{t.exportCallback&&S(()=>t.exportCallback);let[e,s]=(0,x.q)(t.type,t.buf);w(e),y(e.metadata),f(s)}catch(e){console.error("Failed to parse initial result for viewer",e),f(j.vL)}return}n&&v===j.Co&&(async()=>{try{let t,a="true"===l.query.remote,r="remote_".concat(n);if(a&&1){let a=sessionStorage.getItem(r);if(!a){var e;a=null!=(e=localStorage.getItem(r))?e:null}if(a)try{let e=JSON.parse(a);if(e.indexed){let{idbGet:a,idbDelete:l}=await s.e(873).then(s.bind(s,3873)),i=await a(r);if(!i&&e.downloadPath)try{i=(await (0,h.zv)(e.downloadPath)).buf}catch(e){console.error("Failed to re-download remote payload:",e)}if(!i)throw Error("Remote payload not found in IndexedDB or by re-download");await l(r).catch(()=>{}),sessionStorage.removeItem(r),localStorage.removeItem(r),t={type:e.type,buf:i,exportCallback:(0,u.O)(n,i,e.type)}}else{let{data:a,type:l,metadata:i,downloadPath:o}=e,d=new Uint8Array(a).buffer;try{let{idbPut:e}=await s.e(873).then(s.bind(s,3873));await e(r,d);try{localStorage.setItem(r,JSON.stringify({indexed:!0,type:l,metadata:i,downloadPath:o}))}catch(e){console.warn("Failed to write localStorage marker",e)}}catch(e){console.warn("Failed to persist remote payload to IndexedDB:",e)}sessionStorage.removeItem(r),t={type:l,buf:d,exportCallback:(0,u.O)(n,d,l)}}}catch(e){throw console.error("Failed to parse remote session data:",e),Error("Invalid remote session data")}else throw Error("Remote session data not found")}else t="_"!==n?await (0,h.K9)(n,l,!1):await (0,h.TP)(p);t.exportCallback&&S(()=>t.exportCallback);let[i,o]=(0,x.q)(t.type,t.buf);if(w(i),y(i.metadata),f(o),o!==j.vL){let e="bytebin",l=n,i=n;if(a&&t&&"type"in t){e="remote";let t=sessionStorage.getItem(r)||localStorage.getItem(r);if(t){let e=JSON.parse(t);e.downloadPath&&(l=e.downloadPath)}i=decodeURIComponent(l).split("/").pop()||l}else if("_"===n){e="local";let a=(null==p?void 0:p.name)||"local-file";i=a,l="local_".concat(Date.now(),"_").concat(a),s.e(873).then(s.bind(s,3873)).then(e=>{let{idbPut:s}=e;s(l,t.buf).catch(e=>console.warn("Failed to cache local file",e))})}else i=l;(0,m.Pc)({id:l,type:e,title:i,description:new Date().toLocaleString()})}}catch(e){console.log(e),f(j.vL)}})()},[t,v,f,n,p,l]),v){case j.Co:return(0,a.jsx)(o.A,{children:"_"===n?"Loading file...":"Downloading..."});case j.vL:return(0,a.jsx)(o.A,{extraClassName:"loading-error",children:(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,a.jsx)("div",{children:C("viewer.failedLoad.message")}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{onClick:()=>l.push("/"),style:{padding:"6px 10px",borderRadius:4,background:"linear-gradient(90deg,#ffc93a,#ffb300)",border:"none",color:"#111",fontWeight:600},children:C("viewer.failedLoad.goHome")})})]})});case j.VV:return(0,a.jsx)(i.Suspense,{fallback:(0,a.jsx)(o.A,{children:"Loading..."}),children:(0,a.jsx)(A,{data:g,fetchUpdatedData:N,metadata:b,setMetadata:y,exportCallback:k})});case j.es:return(0,a.jsx)(i.Suspense,{fallback:(0,a.jsx)(o.A,{children:"Loading..."}),children:(0,a.jsx)(T,{data:g,metadata:b,exportCallback:k})});case j.Cw:return(0,a.jsx)(i.Suspense,{fallback:(0,a.jsx)(o.A,{children:"Loading..."}),children:(0,a.jsx)(F,{data:g,metadata:b,exportCallback:k})});default:return(0,a.jsx)(o.A,{children:"Unknown state - this is a bug."})}}},3957:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(6823),l=s(4232);function n(e,t){let[s,n]=(0,l.useState)(()=>{let s=(0,a.get)(e);return null!==s?s:t});(0,l.useEffect)(()=>{(0,a.set)(e,s)},[e,s]);let r=(0,l.useCallback)(()=>{n(e=>!e)},[n]);return[s,n,r]}},4344:(e,t,s)=>{"use strict";s.d(t,{A:()=>l,C:()=>n});var a=s(3957);function l(){let[e,,t]=(0,a.A)("prefShowMetadata",!0);return{showMetadata:e,toggleMetadata:t}}function n(){return{showMetadata:!0,toggleMetadata:()=>{}}}},5573:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(7876),l=s(1041),n=s(2318),r=s(8341);function i(e){let{exportCallback:t}=e,{t:s}=(0,r.o)();return t?(0,a.jsx)(n.A,{icon:l.o1d,onClick:t,title:s("viewer.controls.exportProfile")}):null}}}]);